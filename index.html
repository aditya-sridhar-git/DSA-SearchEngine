<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mini Search Engine</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .tagline {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .panel {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.2);
        }

        .panel h2 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 1.4em;
            border-bottom: 2px solid #667eea;
            padding-bottom: 10px;
        }

        .index-section {
            margin-bottom: 25px;
        }

        .index-section h3 {
            color: #333;
            margin-bottom: 12px;
            font-size: 1.1em;
        }

        textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            resize: vertical;
            min-height: 80px;
            transition: border-color 0.3s;
        }

        textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        input[type="text"] {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s;
        }

        input[type="text"]:focus {
            outline: none;
            border-color: #667eea;
        }

        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: transform 0.2s, box-shadow 0.2s;
            margin-top: 10px;
            width: 100%;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        button:active {
            transform: translateY(0);
        }

        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .button-group button {
            flex: 1;
            margin-top: 0;
        }

        .secondary-btn {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        .tertiary-btn {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }

        .documents-list {
            max-height: 300px;
            overflow-y: auto;
        }

        .document-item {
            background: #f8f9fa;
            padding: 12px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }

        .document-item strong {
            color: #667eea;
        }

        .search-box {
            position: relative;
            margin-bottom: 20px;
        }

        .search-input-wrapper {
            position: relative;
        }

        .search-icon {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #999;
            font-size: 1.2em;
        }

        .search-box input {
            padding-left: 45px;
            font-size: 1.1em;
        }

        .search-type {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .search-type label {
            flex: 1;
            text-align: center;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
        }

        .search-type input[type="radio"] {
            display: none;
        }

        .search-type input[type="radio"]:checked + span {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .search-type span {
            display: block;
            font-weight: 600;
        }

        .results-section {
            margin-top: 20px;
        }

        .result-item {
            background: #f8f9fa;
            padding: 15px;
            margin-bottom: 12px;
            border-radius: 8px;
            border-left: 4px solid #764ba2;
        }

        .result-header {
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
            font-size: 1.1em;
        }

        .result-stats {
            color: #666;
            font-size: 0.9em;
        }

        .frequency-bar {
            height: 8px;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            border-radius: 4px;
            margin-top: 8px;
            transition: width 0.3s;
        }

        .no-results {
            text-align: center;
            padding: 40px;
            color: #999;
            font-size: 1.1em;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
        }

        .stat-number {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9em;
            opacity: 0.9;
        }

        .autocomplete-list {
            background: white;
            border: 2px solid #e0e0e0;
            border-top: none;
            border-radius: 0 0 8px 8px;
            max-height: 200px;
            overflow-y: auto;
            position: absolute;
            width: 100%;
            z-index: 1000;
            display: none;
        }

        .autocomplete-item {
            padding: 12px;
            cursor: pointer;
            transition: background 0.2s;
            border-bottom: 1px solid #f0f0f0;
        }

        .autocomplete-item:hover {
            background: #f8f9fa;
        }

        .autocomplete-item strong {
            color: #667eea;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            h1 {
                font-size: 1.8em;
            }
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-left: 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .highlight {
            background: #ffeb3b;
            padding: 2px 4px;
            border-radius: 3px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üîç Mini Search Engine</h1>
            <p class="tagline">Powered by Trie, Hash Table & Linked Lists</p>
        </header>

        <div class="main-content">
            <!-- Left Panel: Indexing -->
            <div class="panel">
                <h2>üìö Index Documents</h2>
                
                <div class="index-section">
                    <h3>Document Name</h3>
                    <input type="text" id="docName" placeholder="e.g., article.txt" value="document1.txt">
                </div>

                <div class="index-section">
                    <h3>Document Content</h3>
                    <textarea id="docContent" rows="6" placeholder="Enter or paste text content here...">The quick brown fox jumps over the lazy dog. The fox is very quick and clever.</textarea>
                </div>

                <button onclick="indexDocument()">Index Document</button>

                <div class="index-section" style="margin-top: 25px;">
                    <h3>Sample Documents</h3>
                    <div class="button-group">
                        <button class="secondary-btn" onclick="loadSample(1)">Animals</button>
                        <button class="secondary-btn" onclick="loadSample(2)">Tech</button>
                        <button class="secondary-btn" onclick="loadSample(3)">Nature</button>
                    </div>
                </div>

                <div style="margin-top: 25px;">
                    <h3>Indexed Documents</h3>
                    <div id="documentsList" class="documents-list">
                        <p style="color: #999; text-align: center; padding: 20px;">No documents indexed yet</p>
                    </div>
                </div>
            </div>

            <!-- Right Panel: Search -->
            <div class="panel">
                <h2>üîé Search Engine</h2>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number" id="totalDocs">0</div>
                        <div class="stat-label">Documents</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="totalWords">0</div>
                        <div class="stat-label">Unique Words</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="totalIndexed">0</div>
                        <div class="stat-label">Total Words</div>
                    </div>
                </div>

                <div class="search-type">
                    <label>
                        <input type="radio" name="searchType" value="keyword" checked>
                        <span>Keyword Search</span>
                    </label>
                    <label>
                        <input type="radio" name="searchType" value="prefix">
                        <span>Prefix Search</span>
                    </label>
                    <label>
                        <input type="radio" name="searchType" value="multi">
                        <span>Multi-Keyword</span>
                    </label>
                </div>

                <div class="search-box">
                    <div class="search-input-wrapper">
                        <span class="search-icon">üîç</span>
                        <input type="text" id="searchInput" placeholder="Enter search query..." oninput="handleSearchInput()">
                        <div id="autocompleteList" class="autocomplete-list"></div>
                    </div>
                    <button onclick="performSearch()">Search</button>
                </div>

                <div class="results-section">
                    <h3 style="color: #333; margin-bottom: 15px;">Search Results</h3>
                    <div id="searchResults">
                        <div class="no-results">
                            Enter a search query to see results
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Search Engine Data Structures (Simulated)
        const searchEngine = {
            documents: [],
            trie: {},
            hashTable: {},
            wordIndex: {},
            stats: {
                totalDocs: 0,
                uniqueWords: 0,
                totalIndexed: 0
            }
        };

        // Sample documents
        const samples = {
            1: {
                name: "animals.txt",
                content: "The quick brown fox jumps over the lazy dog. The fox is very quick and clever. Dogs are loyal animals and foxes are cunning creatures."
            },
            2: {
                name: "technology.txt",
                content: "Data structures are fundamental to computer science. Linked lists, trees, and hash tables are common structures. Algorithms use these structures efficiently."
            },
            3: {
                name: "nature.txt",
                content: "The brown bear lives in the forest. Bears are quick when hunting for food. The forest provides shelter for many animals."
            }
        };

        function loadSample(num) {
            const sample = samples[num];
            document.getElementById('docName').value = sample.name;
            document.getElementById('docContent').value = sample.content;
        }

        function normalizeWord(word) {
            return word.toLowerCase().replace(/[^a-z]/g, '');
        }

        function indexDocument() {
            const name = document.getElementById('docName').value.trim();
            const content = document.getElementById('docContent').value.trim();

            if (!name || !content) {
                alert('Please enter both document name and content');
                return;
            }

            const docId = searchEngine.documents.length;
            const words = content.split(/\s+/);
            const wordCount = {};
            let totalWords = 0;

            // Process each word
            words.forEach(word => {
                const normalized = normalizeWord(word);
                if (normalized.length < 2) return;

                totalWords++;

                // Word frequency
                wordCount[normalized] = (wordCount[normalized] || 0) + 1;

                // Add to hash table
                if (!searchEngine.hashTable[normalized]) {
                    searchEngine.hashTable[normalized] = [];
                    searchEngine.stats.uniqueWords++;
                }

                // Check if this doc already indexed for this word
                const existing = searchEngine.hashTable[normalized].find(d => d.docId === docId);
                if (existing) {
                    existing.frequency++;
                } else {
                    searchEngine.hashTable[normalized].push({
                        docId: docId,
                        frequency: 1
                    });
                }

                // Add to trie for prefix search
                addToTrie(normalized, docId);

                // Track word index
                if (!searchEngine.wordIndex[normalized]) {
                    searchEngine.wordIndex[normalized] = 0;
                }
                searchEngine.wordIndex[normalized]++;
            });

            // Add document
            searchEngine.documents.push({
                id: docId,
                name: name,
                content: content,
                wordCount: wordCount,
                totalWords: totalWords
            });

            searchEngine.stats.totalDocs++;
            searchEngine.stats.totalIndexed += totalWords;

            updateStats();
            updateDocumentsList();

            // Clear form
            document.getElementById('docName').value = `document${docId + 2}.txt`;
            document.getElementById('docContent').value = '';

            showNotification(`‚úì Indexed "${name}" successfully!`);
        }

        function addToTrie(word, docId) {
            // Simple trie simulation
            for (let i = 1; i <= word.length; i++) {
                const prefix = word.substring(0, i);
                if (!searchEngine.trie[prefix]) {
                    searchEngine.trie[prefix] = new Set();
                }
                searchEngine.trie[prefix].add(word);
            }
        }

        function updateStats() {
            document.getElementById('totalDocs').textContent = searchEngine.stats.totalDocs;
            document.getElementById('totalWords').textContent = searchEngine.stats.uniqueWords;
            document.getElementById('totalIndexed').textContent = searchEngine.stats.totalIndexed;
        }

        function updateDocumentsList() {
            const list = document.getElementById('documentsList');
            if (searchEngine.documents.length === 0) {
                list.innerHTML = '<p style="color: #999; text-align: center; padding: 20px;">No documents indexed yet</p>';
                return;
            }

            list.innerHTML = searchEngine.documents.map(doc => `
                <div class="document-item">
                    <strong>${doc.name}</strong> (ID: ${doc.id})<br>
                    Words: ${doc.totalWords} | Unique: ${Object.keys(doc.wordCount).length}
                </div>
            `).join('');
        }

        function performSearch() {
            const query = document.getElementById('searchInput').value.trim();
            if (!query) {
                alert('Please enter a search query');
                return;
            }

            const searchType = document.querySelector('input[name="searchType"]:checked').value;

            if (searchType === 'keyword') {
                searchKeyword(query);
            } else if (searchType === 'prefix') {
                searchPrefix(query);
            } else if (searchType === 'multi') {
                searchMulti(query);
            }
        }

        function searchKeyword(query) {
            const normalized = normalizeWord(query);
            const results = searchEngine.hashTable[normalized];

            const resultsDiv = document.getElementById('searchResults');

            if (!results || results.length === 0) {
                resultsDiv.innerHTML = '<div class="no-results">No results found for "' + query + '"</div>';
                return;
            }

            const totalFreq = results.reduce((sum, r) => sum + r.frequency, 0);
            const maxFreq = Math.max(...results.map(r => r.frequency));

            resultsDiv.innerHTML = `
                <div style="margin-bottom: 15px; color: #666;">
                    Found <strong>${results.length}</strong> document(s) with <strong>${totalFreq}</strong> total occurrences
                </div>
                ${results.map(result => {
                    const doc = searchEngine.documents[result.docId];
                    const tf = (result.frequency / doc.totalWords * 100).toFixed(2);
                    const barWidth = (result.frequency / maxFreq * 100);
                    
                    return `
                        <div class="result-item">
                            <div class="result-header">üìÑ ${doc.name} (ID: ${doc.id})</div>
                            <div class="result-stats">
                                Frequency: <strong>${result.frequency}</strong> | 
                                Term Frequency: <strong>${tf}%</strong> | 
                                Total Words: ${doc.totalWords}
                            </div>
                            <div class="frequency-bar" style="width: ${barWidth}%"></div>
                        </div>
                    `;
                }).join('')}
            `;
        }

        function searchPrefix(query) {
            const normalized = normalizeWord(query);
            const matches = searchEngine.trie[normalized];

            const resultsDiv = document.getElementById('searchResults');

            if (!matches || matches.size === 0) {
                resultsDiv.innerHTML = '<div class="no-results">No words found with prefix "' + query + '"</div>';
                return;
            }

            const sortedMatches = Array.from(matches).sort((a, b) => {
                return (searchEngine.wordIndex[b] || 0) - (searchEngine.wordIndex[a] || 0);
            });

            resultsDiv.innerHTML = `
                <div style="margin-bottom: 15px; color: #666;">
                    Found <strong>${sortedMatches.length}</strong> word(s) with prefix "<strong>${query}</strong>"
                </div>
                ${sortedMatches.map(word => {
                    const freq = searchEngine.wordIndex[word] || 0;
                    const docs = searchEngine.hashTable[word] || [];
                    
                    return `
                        <div class="result-item">
                            <div class="result-header">
                                <span class="highlight">${normalized}</span>${word.substring(normalized.length)}
                            </div>
                            <div class="result-stats">
                                Total occurrences: <strong>${freq}</strong> | 
                                Documents: <strong>${docs.length}</strong>
                            </div>
                        </div>
                    `;
                }).join('')}
            `;
        }

        function searchMulti(query) {
            const keywords = query.split(/\s+/).map(normalizeWord).filter(w => w.length >= 2);

            if (keywords.length === 0) {
                alert('Please enter at least one valid keyword');
                return;
            }

            const resultsDiv = document.getElementById('searchResults');

            // Find documents containing all keywords
            const docScores = {};
            const docMatches = {};

            keywords.forEach(keyword => {
                const results = searchEngine.hashTable[keyword];
                if (results) {
                    results.forEach(result => {
                        docMatches[result.docId] = (docMatches[result.docId] || 0) + 1;
                        docScores[result.docId] = (docScores[result.docId] || 0) + result.frequency;
                    });
                }
            });

            // Filter docs with all keywords
            const matchingDocs = Object.keys(docMatches)
                .filter(docId => docMatches[docId] === keywords.length)
                .map(docId => ({
                    docId: parseInt(docId),
                    score: docScores[docId]
                }))
                .sort((a, b) => b.score - a.score);

            if (matchingDocs.length === 0) {
                resultsDiv.innerHTML = `
                    <div class="no-results">
                        No documents contain all keywords: ${keywords.join(', ')}
                    </div>
                `;
                return;
            }

            const maxScore = Math.max(...matchingDocs.map(d => d.score));

            resultsDiv.innerHTML = `
                <div style="margin-bottom: 15px; color: #666;">
                    Found <strong>${matchingDocs.length}</strong> document(s) containing all keywords: 
                    <strong>${keywords.join(', ')}</strong>
                </div>
                ${matchingDocs.map(match => {
                    const doc = searchEngine.documents[match.docId];
                    const barWidth = (match.score / maxScore * 100);
                    
                    return `
                        <div class="result-item">
                            <div class="result-header">üìÑ ${doc.name} (ID: ${doc.id})</div>
                            <div class="result-stats">
                                Relevance Score: <strong>${match.score}</strong> | 
                                Total Words: ${doc.totalWords}
                            </div>
                            <div class="frequency-bar" style="width: ${barWidth}%"></div>
                        </div>
                    `;
                }).join('')}
            `;
        }

        function handleSearchInput() {
            const query = document.getElementById('searchInput').value.trim();
            const searchType = document.querySelector('input[name="searchType"]:checked').value;
            const autocompleteList = document.getElementById('autocompleteList');

            if (query.length < 2 || searchType !== 'keyword') {
                autocompleteList.style.display = 'none';
                return;
            }

            const normalized = normalizeWord(query);
            const matches = searchEngine.trie[normalized];

            if (!matches || matches.size === 0) {
                autocompleteList.style.display = 'none';
                return;
            }

            const sortedMatches = Array.from(matches).slice(0, 5);

            autocompleteList.innerHTML = sortedMatches.map(word => `
                <div class="autocomplete-item" onclick="selectAutocomplete('${word}')">
                    <strong>${word}</strong> (${searchEngine.wordIndex[word]} occurrences)
                </div>
            `).join('');

            autocompleteList.style.display = 'block';
        }

        function selectAutocomplete(word) {
            document.getElementById('searchInput').value = word;
            document.getElementById('autocompleteList').style.display = 'none';
            performSearch();
        }

        function showNotification(message) {
            const notif = document.createElement('div');
            notif.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: #4caf50;
                color: white;
                padding: 15px 25px;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.3);
                z-index: 10000;
                animation: slideIn 0.3s ease;
            `;
            notif.textContent = message;
            document.body.appendChild(notif);

            setTimeout(() => {
                notif.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => notif.remove(), 300);
            }, 3000);
        }

        // Close autocomplete when clicking outside
        document.addEventListener('click', function(e) {
            if (!e.target.closest('.search-box')) {
                document.getElementById('autocompleteList').style.display = 'none';
            }
        });

        // Enable search on Enter key
        document.getElementById('searchInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                performSearch();
            }
        });
    </script>
</body>
</html>